
DROP TABLE MEMBER13;
DROP TABLE ORDER13;
DROP TABLE PRODUCT13;
DROP TABLE ZIPCODE13;



/*
  JOIN 실습 
-- 각테이블의 레코드 5개씩 넣습니다
-- ANSI JOIN 문을 사용해서 부분정보 (ORDER10) 테이블을 기준으로
 -- 주문자명 ,주문자이메일주소,주문자번지(시도 ) 주문자제증명 ,제품의 가격을 출력합니다
 -- ORDER10 , MEMBER 10, ZIPCODE10, PRODUCT10
  -- 1. MEMBER  10 : 회원정보 를 저장하는 테이블
  --  2. ZIPCODE 10 : 우편번호를 저장하는 테이블
 --   3. PRODUCT 10 :제품정보 를 저장하는 테이블 
 --   4. ORDER   10 : 주문정보를 저장하는 테이블
*/
CREATE TABLE  ZIPCODE11 (
    ZIPCODE NUMBER(5) NOT NULL CONSTRAINT PK_ZIPCODE11_ZIPCODE PRIMARY KEY,
    SI_DO VARCHAR2(200) NOT NULL,
    GU_GUN VARCHAR2(200) NOT NULL,
    BUNGI VARCHAR2(200) NOT NULL 
    );
        
CREATE TABLE MEMEBER11(
 M_ID NUMBER(4) NOT NULL CONSTRAINT PK_MEMBER110_M_ID PRIMARY KEY,
 PASS VARCHAR2(200) NOT NULL ,
 NAME VARCHAR2(200) NOT NULL ,
 EMAIL VARCHAR2(200) NOT NULL,
 ZIPCODE NUMBER(6) NOT NULL,
 -- FOREIGN KEY 제약조건추가함,
 CONSTRAINT FK_MEMBER11_ZIPCODE FOREIGN KEY (ZIPCODE) REFERENCES ZIPCODE11 (ZIPCODE)
 );
 
CREATE TABLE RPODUCT11 (
   PRO_ID NUMBER(6)NOT NULL CONSTRAINT PK_PRODUCT11_PRO_ID PRIMARY KEY,
   PRO_NAME VARCHAR2 (200) NOT NULL,
   PRO_PRICE NUMBER(7,2)NOT NULL,
   PRO_CNT NUMBER(4) DEFAULT 0 NOT NULL
   );
     
SELECT *
FROM order11;

CREATE TABLE ORDER11 (
    ORD_ID NUMBER(6) NOT NULL,
    M_ID NUMBER(4) NOT NULL,   -- FK   :MEMBER 10 (M_ID)     
    PRO_ID NUMBER(6) NOT NULL   -- FK  : PRODUCT10 (PRO_ID)  
    -- FOREIGN KEY 가 2개
);

alter table order11
add constraint PK_order11_ord_id primary key (ord_id) ; 

alter table order11
add constraint FK_ORDER11_M_ID foreign key (m_id) references member11 (m_id);

alter table order11
add constraint FK_ORDER11_M_ID foreign key (pro_id) references product11 (m_id);



-- 각테이블의 레코드 5개씩 넣습니다
-- ANSI JOIN 문을 사용해서 부분정보 (ORDER10) 테이블을 기준으로
 -- 주문자명 ,주문자이메일주소,주문자번지(시도 ) 주문자제증명 ,제품의 가격을 출력합니다
 -- ORDER10 , MEMBER 10, ZIPCODE10, PRODUCT10
  -- 1. MEMBER  10 : 회원정보 를 저장하는 테이블
  --  2. ZIPCODE 10 : 우편번호를 저장하는 테이블
 --   3. PRODUCT 10 :제품정보 를 저장하는 테이블 
 --   4. ORDER   10 : 주문정보를 저장하는 테이블


 insert into MEMBER10 (M_ID ,PASS ,NAME ,EMAIL,ZIPCOD) 
values ('WOLK', 1234, 'EILE' ,'WOLK2' ,70); 

  insert into ORDER10 (ORD_ID, M_ID, PRO_ID) 
values ( 'WOLK2' , 'WOLK', 'WOLK22'); 
 
  insert into PRODUCT10 (PRO_ID , PRO_NAME, PRO_PRICE,PRO_CNT) 
values ( 'WOLK22' , 'ELIE', 20000, 20);
 
  insert into  ZIPCODE10 (ZIPCODE , SI_DO, GU_GUN ,BUNGI) 
values ( 70 , 'SEOUL', 'YOUNGDUENPO',23); 

 
 -- Insert into MEMBER10 table
INSERT INTO MEMBER13 (M_ID, PASS, NAME, EMAIL, ZIPCODE)
VALUES (1234,'B1234', 'EILE', 'CK@NAVER.COM', 12345);

INSERT INTO MEMBER13 (M_ID, PASS, NAME, EMAIL, ZIPCODE)
VALUES (1235,'B2334','김초크', 'WOLK2@NAVER.COM',42570);

INSERT INTO MEMBER13 (M_ID, PASS, NAME, EMAIL, ZIPCODE)
VALUES (4564, 'J1234', 'EIHUE', 'WO4@NAVER.COM', 13470);

INSERT INTO MEMBER13 (M_ID, PASS, NAME, EMAIL, ZIPCODE)
VALUES (9874, 'L1234', '홍길동', 'W242@NAVER.COM', 21370);

INSERT INTO MEMBER13 (M_ID, PASS, NAME, EMAIL, ZIPCODE)
VALUES (2635, 'Q1234', '홍길순', '12LK2@NAVER.COM', 56670);

-- Insert into ORDER10 table
INSERT INTO ORDER13 (ORD_ID, M_ID, PRO_ID)
VALUES (100011,1234, 789456);

INSERT INTO ORDER13 (ORD_ID, M_ID, PRO_ID)
VALUES (456879, 4578, 649876);

INSERT INTO ORDER13 (ORD_ID, M_ID, PRO_ID)
VALUES (225687,9845, 789466);

INSERT INTO ORDER13 (ORD_ID, M_ID, PRO_ID)
VALUES (333333, 4444, 555555);

INSERT INTO ORDER13 (ORD_ID, M_ID, PRO_ID)
VALUES (455666, 7777, 888888);


-- Insert into PRODUCT10 table
INSERT INTO PRODUCT13 (PRO_ID, PRO_NAME, PRO_PRICE, PRO_CNT)
VALUES (700025, '비타민E', 5000.25, 2057);

INSERT INTO PRODUCT13 (PRO_ID, PRO_NAME, PRO_PRICE, PRO_CNT)
VALUES (500688, '비타민C', 2000.21, 2088);

INSERT INTO PRODUCT13 (PRO_ID, PRO_NAME, PRO_PRICE, PRO_CNT)
VALUES (888505, '비타민D', 2008.45, 2098);

INSERT INTO PRODUCT13 (PRO_ID, PRO_NAME, PRO_PRICE, PRO_CNT)
VALUES (998785, '비타민A', 2060.87, 2580);

INSERT INTO PRODUCT13 (PRO_ID, PRO_NAME, PRO_PRICE, PRO_CNT)
VALUES (885468, '비타민F', 2290.11, 2022);

-- Insert into ZIPCODE10 table
INSERT INTO ZIPCODE13 (ZIPCODE, SI_DO, GU_GUN, BUNGI)
VALUES (7045, 'SEOUL', '강동구','1번지');

INSERT INTO ZIPCODE13 (ZIPCODE, SI_DO, GU_GUN, BUNGI)
VALUES (7013,'부산', '영등포', '23번지');

INSERT INTO ZIPCODE13 (ZIPCODE, SI_DO, GU_GUN, BUNGI)
VALUES (7340, '대구', '긴고랑로', '25번지');

INSERT INTO ZIPCODE13 (ZIPCODE, SI_DO, GU_GUN, BUNGI)
VALUES (6770, '인천', '개포동', '33번지');

INSERT INTO ZIPCODE13 (ZIPCODE, SI_DO, GU_GUN, BUNGI)
VALUES (7780, '천안', '구월동', '893번지');

SELECT M.NAME AS 주문자명, M.EMAIL AS 주문자이메일주소, Z.SI_DO AS 주문자번지_시도,
Z.BUNGI AS 주문자제증명, P.PRO_PRICE AS 제품의가격
FROM ORDER10 O
JOIN MEMBER10 M ON O.M_ID = M.M_ID
JOIN ZIPCODE10 Z ON M.ZIPCODE = Z.ZIPCODE
JOIN PRODUCT10 P ON O.PRO_ID = P.PRO_ID
WHERE O.ORD_ID = 'WOLK2';

 SELECT *FROM PRODUCT10;
   
 SELECT *FROM MEMBER10;
 SELECT * FROM all_tables WHERE table_name = 'MEMBER10';
SELECT * FROM all_tables WHERE table_name = 'PRODUCT10';
 SELECT *FROM ORDER10 ;
 
 SELECT *FROM ZIPCODE10 ;